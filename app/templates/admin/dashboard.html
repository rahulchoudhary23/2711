{% extends 'base.html' %}
{% block title %}Admin Dashboard | Event Manager{% endblock %}
{% block content %}
<section class="section">
  <div class="section__header">
    <div>
      <h1>Admin Dashboard</h1>
      <p>Monitor event performance and manage listings.</p>
      {% if admin_scope and admin_scope != 'super' %}
        <p class="section__subtitle">You are currently viewing <strong>{{ admin_scope }}</strong> events only.</p>
      {% endif %}
    </div>
    <a class="btn btn--primary" href="{{ url_for('admin.create_event') }}">Create Event</a>
  </div>

  <div class="stats">
    <div class="stat">
      <span class="stat__value">{{ events|length }}</span>
      <span class="stat__label">Total Events</span>
    </div>
    <div class="stat">
      <span class="stat__value">{{ upcoming_events }}</span>
      <span class="stat__label">Upcoming</span>
    </div>
    <div class="stat">
      <span class="stat__value">{{ total_registrations }}</span>
      <span class="stat__label">Registrations</span>
    </div>
  </div>

  <table class="table">
    <thead>
      <tr>
        <th>Title</th>
        <th>Type</th>
        <th>Schedule</th>
        <th>Location</th>
        <th>Seats Remaining</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for event in events %}
        <tr>
          <td>{{ event.title }}</td>
          <td><span class="chip">{{ event.event_type }}</span></td>
          <td>{{ event.start_time.strftime('%b %d %Y %I:%M %p') }}</td>
          <td>{{ event.location }}</td>
          <td>{{ event.seats_remaining }}</td>
          <td>
            <a class="link" href="{{ url_for('admin.edit_event', event_id=event.id) }}">Edit</a>
            <form method="post" action="{{ url_for('admin.delete_event', event_id=event.id) }}" onsubmit="return confirm('Are you sure you want to delete this event?');" class="inline">
              <button class="link link--danger" type="submit">Delete</button>
            </form>
            <a class="link" href="{{ url_for('admin.event_registrations', event_id=event.id) }}">Registrations</a>
          </td>
        </tr>
      {% else %}
        <tr>
          <td colspan="5">No events created yet.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</section>
{% endblock %}
